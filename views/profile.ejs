<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Profile</title>
    <%- include('partials/head') %>
</head>
<body>
    <%- include('partials/header') %>
    <div class="client-profile-container down-fivepercent" style="justify-content: left; margin-left: 2em;">
      <div class="client-profile-container">
          <div class="profile-pic-circle">
            <% if (user.profilePic) { %>
              <img src="<%= user.profilePic %>" alt="Profile Image" />
            <% } else { %>
              <i class="fa-solid fa-user"></i>
            <% } %>
          </div>
          <h2 style="text-align: left; margin-top: 1em;"><%= user.name %>'s profile</h2>
          <a href="/client/edit-profile" style="text-decoration: none; color: blue; font-size: 0.8em;">Edit your profile</a>
        </div>
        <div class="client-profile-right">
          <!-- <p><%= user.email %></p> -->
          <p> has rated <%= isPro.length %> Professionals</p>
          <p>has <%= clientProjects.length %> projects</p>
          <p>has commented on <%= clientComments.length %> projects</p>
          <p>has commented on <%= isPro.length %> professionals</p>
          <a href="/client/projects"><h3>Projects</h3></a>
          <div class="client-profile-projects" style="display: flex; flex-wrap: wrap; gap: 1em; margin-top: 1em;">
            <% clientProjects.forEach(project => { %>
              <div class="client-profile-project" style="border: 1px solid #ddd; border-radius: 8px; padding: 1em; background-color: #f9f9f9; min-width: 200px;">
                <a href="/client/projects" style="text-decoration: none; color: inherit;">
                  <% if (project.images && project.images.length > 0) { %>
                    <img src="<%= project.images[0] %>" alt="Project Image" style="width: 100%; height: 120px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5em;"/>
                  <% } else { %>
                    <div style="width: 100%; height: 120px; background-color: #e0e0e0; border-radius: 5px; display: flex; align-items: center; justify-content: center; margin-bottom: 0.5em;">
                      <i class="fa-solid fa-image" style="font-size: 2em; color: #999;"></i>
                    </div>
                  <% } %>
                  <h4 style="margin: 0.5em 0; color: #333;"><%= project.title %></h4>
                  <p style="margin: 0.2em 0; color: #666; font-size: 0.9em;"><strong>Type:</strong> <%= project.type %></p>
                  <p style="margin: 0.2em 0; color: #666; font-size: 0.9em;"><strong>Price:</strong> â‚¬<%= project.price %></p>
                </a>
              </div>
            <% }) %>
          </div>
        </div>
    </div>